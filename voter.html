<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Voter â€” Hercule Project</title>
  <!-- On s'appuie sur ta feuille de style globale -->
  <link rel="stylesheet" href="/style.css">
  <meta name="description" content="Vote, partage et gagne des Jetons dâ€™Hercule Ã  Ã©changer contre des rÃ©compenses." />
</head>
<body>
  <!-- Header commun du site -->
  <div id="site-header" data-header="/header-root.html"></div>
  <script src="/assets/js/header.js"></script>

  <main class="wrap" style="padding-bottom:72px">
    <!-- HERO -->
    <header class="grid cols-2" style="align-items:center;gap:22px;margin-top:16px">
      <div>
        <div class="badge">Page communautÃ©</div>
        <h1>Soutiens le <span class="accent">Hercule Project</span> ğŸ’ª</h1>
        <p class="lead">Vote pour nous, partage lâ€™aventure et gagne des <strong>Jetons dâ€™Hercule</strong> Ã  Ã©changer contre des rÃ©compenses.</p>
        <div class="row" style="margin-top:12px;gap:10px;flex-wrap:wrap">
          <div class="stat">ğŸ”¥ Votes ce moisâ€‘ci : <span id="voteMonth">0</span></div>
          <div class="stat">ğŸ–ï¸ Objectif : <span id="goal">500</span></div>
          <div class="stat">ğŸ† Top supporters : <span id="top">â€”</span></div>
        </div>
        <div class="goal" style="margin-top:12px"><i id="bar"></i></div>
        <p class="tiny">Astuce : chaque <strong>vote + partage</strong> = bonus de jetons ğŸ’</p>
      </div>
      <figure class="imgbox">
        <img src="/assets/img/jetons-hercule.png" alt="Jetons dâ€™Hercule â€” illustration" loading="lazy">
      </figure>
    </header>

    <!-- 3 BLOCS PRINCIPAUX -->
    <section class="grid cols-3" style="margin-top:18px">
      <!-- 1) Voter -->
      <article class="card">
        <h3>1) Voter</h3>
        <p class="muted">Choisis un site de vote ciâ€‘dessous, clique et dÃ©pose ton vote.</p>
        <div class="row" style="margin-top:10px;gap:10px;flex-wrap:wrap">
          <!-- Remplace les href par tes liens rÃ©els -->
          <a class="btn" href="https://exemple-topsite-1.com" target="_blank" rel="noopener">â­ Voter (TopSite 1)</a>
          <a class="btn" href="https://exemple-topsite-2.com" target="_blank" rel="noopener">â­ Voter (TopSite 2)</a>
          <a class="btn" href="https://exemple-topsite-3.com" target="_blank" rel="noopener">â­ Voter (TopSite 3)</a>
        </div>
        <p class="tiny">AprÃ¨s ton vote, reviens ici pour partager et rÃ©cupÃ©rer tes jetons.</p>
      </article>

      <!-- 2) Partager -->
      <article class="card">
        <h3>2) Partager lâ€™aventure</h3>
        <p class="muted">Un message prÃ©â€‘rempli sera proposÃ©. Si ton navigateur ne le permet pas, on copie le texte pour toi.</p>
        <button id="shareBtn" class="btn primary" style="margin-top:4px">ğŸ“£ Partager & gagner des jetons</button>
        <p id="shareState" class="tiny" style="margin-top:8px"></p>
        <div class="note" style="margin-top:10px">
          <p class="tiny"><strong>Gain type :</strong> Vote = +5 jetons Â· Vote + Partage = +15 jetons.</p>
        </div>
      </article>

      <!-- 3) RÃ©compenses -->
      <article class="card">
        <h3>RÃ©compenses</h3>
        <table class="table">
          <thead><tr><th>RÃ©compense</th><th>CoÃ»t</th></tr></thead>
          <tbody>
            <tr><td>Autocollant</td><td>300 jetons</td></tr>
            <tr><td>Tâ€‘shirt exclusif</td><td>1000 jetons</td></tr>
            <tr><td>MÃ©daille collector</td><td>1500 jetons</td></tr>
            <tr><td>RÃ©duction de 5 â‚¬ sur un niveau</td><td>500 jetons</td></tr>
          </tbody>
        </table>
        <p class="tiny">Les rÃ©compenses physiques sont en quantitÃ© limitÃ©e.</p>
      </article>
    </section>

    <!-- Comment gagner / dÃ©penser -->
    <section class="grid cols-2" style="margin-top:16px;align-items:start">
      <article class="card">
        <h3>Comment gagner des jetons</h3>
        <ul class="list">
          <li>Voter â†’ <strong>+5</strong> jetons</li>
          <li>Voter + partager â†’ <strong>+15</strong> jetons</li>
          <li>Participer Ã  un dÃ©fi â†’ <strong>+50</strong> jetons</li>
          <li>Top 10 mensuel â†’ <strong>+100</strong> jetons</li>
          <li>Parrainage validÃ© â†’ <strong>+200</strong> jetons</li>
        </ul>
      </article>
      <article class="card">
        <h3>Comment dÃ©penser</h3>
        <ul class="list">
          <li><span class="check">âœ”</span> Badges (50 jetons)</li>
          <li><span class="check">âœ”</span> RÃ©ductions internes (150 jetons)</li>
          <li><span class="check">âœ”</span> Boost XP (100 jetons)</li>
          <li><span class="check">âœ”</span> CosmÃ©tiques virtuels (75 jetons)</li>
        </ul>
      </article>
    </section>

    <footer style="margin-top:28px">
      <p class="tiny">En votant/partageant, tu acceptes nos <a href="/cgu.html" class="accent">CGU</a>. Antiâ€‘triche : validations automatiques + contrÃ´le manuel ponctuel.</p>
    </footer>
  </main>

  <!-- JS spÃ©cifique Ã  la page (lÃ©ger, compatible avec ton style global) -->
  <script>
    // --------- MOCK compteur votes (Ã  brancher sur ton backend) ----------
    const monthVotes = 257;           // TODO: valeur issue de ton API
    const monthGoal  = 500;           // objectif
    const topNames   = ["LÃ©o","Nora","Axel"]; // top supporters

    // Rendus
    document.getElementById('voteMonth').textContent = monthVotes;
    document.getElementById('goal').textContent = monthGoal;
    document.getElementById('top').textContent = topNames.join(", ");
    const pct = Math.min(100, Math.round((monthVotes / monthGoal) * 100));
    const bar = document.getElementById('bar');
    if (bar) bar.style.width = pct + "%";

    // --------- Partage (Web Share API + fallback copy) -------------------
    const shareBtn = document.getElementById('shareBtn');
    const shareMsg = "ğŸ’ª Jâ€™ai rejoint lâ€™aventure du Hercule Project ! Toi aussi viens relever les dÃ©fis ğŸ”¥ #HerculeProject";
    const shareUrl = location.origin || "https://ton-domaine.fr";

    async function doShare(){
      const state = document.getElementById('shareState');
      try{
        if (navigator.share){
          await navigator.share({ title:"Hercule Project", text:shareMsg, url:shareUrl });
          state.textContent = "Merci ! Partage effectuÃ©. +15 jetons seront crÃ©ditÃ©s âœ¨";
        } else {
          await navigator.clipboard.writeText(`${shareMsg} ${shareUrl}`);
          state.textContent = "Message copiÃ© ! Colleâ€‘le sur tes rÃ©seaux et rÃ©cupÃ¨re +15 jetons âœ¨";
        }
        // TODO: fetch('/api/credit-share', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({kind:'share_social'})})
      }catch(e){
        state.textContent = "Partage annulÃ©.";
      }
    }
    if (shareBtn) shareBtn.addEventListener('click', doShare);

    // --------- Activer l'onglet actif dans le header ---------------------
    // Si ton header-root.html utilise <a href="/voter.html">, le script header.js
    // peut gÃ©rer l'Ã©tat actif automatiquement. Sinon :
    document.addEventListener('DOMContentLoaded', ()=>{
      const link = document.querySelector('a[href$="/voter.html"]');
      if(link) link.classList.add('active');
    });
  </script>
</body>
</html>
